import{a as c,j as e,M as S,S as M,k as N,a7 as L,n as x,A as b,t as E,q as I,F as B,r as j,a8 as O}from"./index-70172670.js";import{T as _}from"./tableSkelton-6bef641a.js";const q=({isOpen:n,onClose:h,onDelete:g,chapterIdToDelete:s})=>{const[p,l]=c.useState(!1),i=async()=>{var d,m;try{s&&(l(!0),await L(s),x("Chapter deleted successfully.","success"),l(!1),g(s))}catch(a){l(!1),a instanceof b&&((m=(d=a.response)==null?void 0:d.data)!=null&&m.error)?x(a.response.data.error,"error"):x("An error occured in deleting the chapter.","error")}};return e.jsxs(S,{isOpen:n,onRequestClose:h,contentLabel:"Delete Confirmation Modal",className:"modal fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white rounded-lg p-6 w-11/12 max-w-md shadow-lg",overlayClassName:"modal-overlay fixed top-0 left-0 w-full h-full bg-gray-700 bg-opacity-50 flex items-center justify-center",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 max-w-md mx-auto text-center",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Confirm Deletion"}),e.jsx("p",{className:"mb-4",children:"Are you sure you want to delete this chapter?"}),e.jsx("div",{className:"flex justify-center",children:p?e.jsx(M,{color:"#4A90E2",loading:!0}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:i,className:"px-4 py-2 rounded bg-red-500 hover:bg-red-600 text-white focus:outline-none mr-2",children:p?"Deleting...":"Yes, Delete"}),e.jsx("button",{onClick:h,className:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-800 focus:outline-none",children:"Cancel"})]})})]}),e.jsx(N,{})]})},T=()=>{var y;const{courseId:n}=E(),h=I(),s=(y=B().state)==null?void 0:y.course,[p,l]=c.useState(!1),[i,d]=c.useState([]),[m,a]=c.useState(null),[w,f]=c.useState(!1);c.useEffect(()=>{l(!0),(async()=>{var o,u;try{if(n){const r=await O(n),A=r==null?void 0:r.data.result;d(A||[])}}catch(r){r instanceof b&&((u=(o=r.response)==null?void 0:o.data)!=null&&u.error)?x(r.response.data.error,"error"):x("An error occurred in fetching the chapters.","error")}finally{l(!1)}})()},[n]);const C=()=>{h(`/trainer/course/add-chapter/${n}`,{state:{course:s}})},v=t=>{f(!0),a(t)},D=()=>{f(!1),a(null)},k=t=>{f(!1);const o=i.filter(u=>u._id!==t);d(o),a(null)};return p?e.jsx(_,{}):e.jsxs("div",{className:"container mx-auto p-3",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md mb-2 mt-2 max-w-sm",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Course Details"}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Course Name:"})," ",s.courseName]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Description:"})," ",s.description]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Duration:"})," ",s.duration," hours"]})]}),e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Chapters"}),e.jsx(j.Button,{variant:"gradient",onClick:C,color:"blue",children:"Add Chapter"}),i.length>0?e.jsxs("table",{className:"min-w-full border divide-y divide-gray-200 mt-4",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SL No"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Caption"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Video Link"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map((t,o)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:o+1}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:t.caption}),e.jsx("td",{className:"px-4 py-2 ",children:t.description}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:e.jsx("a",{href:t.videoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:"Link"})}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:e.jsx(j.Button,{onClick:()=>v(t._id),color:"red",className:"text-xs px-2 py-1",children:"Delete"})})]},t._id))})]}):e.jsxs("div",{className:"bg-white border rounded-lg p-8 text-center shadow-inner  mt-4",children:[e.jsx("p",{className:"text-gray-500 text-lg",children:"No Chapters added."}),e.jsx("p",{className:"text-gray-500 text-lg",children:'Click "Add Chapter" to create a new chapter.'})]}),e.jsx(q,{isOpen:w,onClose:D,onDelete:k,chapterIdToDelete:m}),e.jsx(N,{})]})};export{T as default};
