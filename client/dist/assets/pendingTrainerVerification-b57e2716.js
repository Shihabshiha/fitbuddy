import{j as e,M as j,a as f,n as c,k as P,A as y}from"./index-61c849f7.js";import{g as T,s as _,a as q}from"./admin-58b4bffa.js";import{T as $}from"./tableSkelton-e0ec9b9d.js";const O=({isOpen:u,certificates:l,onRequestClose:n,selectedTrainer:d,selectedCertificateIndex:o})=>e.jsx(j,{isOpen:u,onRequestClose:n,contentLabel:"Certificate Modal",className:"modal fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white rounded-lg p-6 w-11/12 max-w-md shadow-lg",overlayClassName:"modal-overlay fixed top-0 left-0 w-full h-full bg-gray-700 bg-opacity-50 flex items-center justify-center",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("h2",{className:"modal-title text-2xl font-bold mb-4",children:"Certificates"}),d&&o!==null&&e.jsx("div",{className:"certificate-container",children:e.jsx("div",{className:"certificate bg-gray-100 p-4 rounded-lg shadow",children:e.jsx("img",{src:l[o],alt:`Certificate ${o+1}`,className:"w-full h-auto"})})}),e.jsx("button",{className:"modal-close-button bg-gray-500 text-white mt-4 px-4 py-2 rounded",onClick:n,children:"Close"})]})}),V=({isOpen:u,onClose:l,onReject:n,title:d})=>{const[o,p]=f.useState(""),b=()=>{o.trim()===""?c("Please provide a reason for rejection.","error"):(n(o),p(""))};return e.jsx(j,{isOpen:u,onRequestClose:l,contentLabel:d,className:"modal fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white rounded-lg p-6 w-11/12 max-w-md shadow-lg",overlayClassName:"modal-overlay fixed top-0 left-0 w-full h-full bg-gray-700 bg-opacity-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-lg p-4 max-w-md mx-auto",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:d}),e.jsx("textarea",{value:o,onChange:h=>p(h.target.value),className:"w-full h-24 p-2 border rounded mb-4",placeholder:"Enter reason for rejection..."}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{onClick:l,className:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 focus:outline-none",children:"Cancel"}),e.jsx("button",{onClick:b,className:"ml-2 px-4 py-2 rounded bg-red-500 hover:bg-red-600 text-white focus:outline-none",children:"Reject"})]})]})})};j.setAppElement("#root");const I=({isOpen:u,onClose:l,onConfirm:n,title:d,message:o})=>e.jsx(j,{isOpen:u,onRequestClose:l,contentLabel:d,className:"modal fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white rounded-lg p-6 w-11/12 max-w-md shadow-lg",overlayClassName:"modal-overlay fixed top-0 left-0 w-full h-full bg-gray-700 bg-opacity-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-lg  p-4 max-w-md mx-auto ",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:d}),e.jsx("p",{className:"text-sm mb-4",children:o}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{onClick:l,className:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 focus:outline-none",children:"Cancel"}),e.jsx("button",{onClick:n,className:"ml-2 px-4 py-2 rounded bg-green-500 hover:bg-green-600 text-white focus:outline-none",children:"Confirm"})]})]})}),G=()=>{const[u,l]=f.useState([]),[n,d]=f.useState(null),[o,p]=f.useState(null),[b,h]=f.useState(!1),[r,w]=f.useState(null),[N,g]=f.useState(!1),[x,v]=f.useState(null),[C,m]=f.useState(!0);f.useEffect(()=>{(async()=>{var i,t;try{const a=await T();l(a.data.pendingList),m(!1)}catch(a){m(!1),console.error("Error during fetching trainers data:",a),a instanceof y&&((t=(i=a.response)==null?void 0:i.data)!=null&&t.error)?c(a.response.data.error,"error"):c("An error occured in fetching trainers data.","error")}})()},[]);const R=(s,i)=>{d(s),p(i)},S=()=>{d(null),p(null)},M=s=>{w(s),h(!0)},k=s=>{v(s),g(!0)},E=async()=>{var s,i;try{m(!0),r!=null&&r.email?(await _(r.email),c("Request accepted and send mail successfully","success"),l(t=>t.filter(a=>a._id!==(r==null?void 0:r._id))),m(!1),h(!1)):(m(!1),c("Email address not available for selected trainer.","error"),h(!1))}catch(t){m(!1),console.error("Error during sending mail:",t),t instanceof y&&((i=(s=t.response)==null?void 0:s.data)!=null&&i.error)?c(t.response.data.error,"error"):c("An error during sending mail.","error")}},A=async s=>{var i,t;try{m(!0),x!=null&&x.email?(await q(x.email,s),c("Trainer rejected and mail sent successfully","success"),l(a=>a.filter(L=>L._id!==(x==null?void 0:x._id))),m(!1),g(!1)):(m(!1),c("Email address not available for selected trainer.","error"),g(!1))}catch(a){m(!1),console.error("Error during sending rejection mail:",a),a instanceof y&&((t=(i=a.response)==null?void 0:i.data)!=null&&t.error)?c(a.response.data.error,"error"):c("An error during sending rejection mail.","error")}};return e.jsxs("div",{className:"container mx-auto mt-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Pending Trainer Verification"}),C?e.jsx(e.Fragment,{children:e.jsx($,{})}):e.jsxs("table",{className:"w-full border",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-200",children:[e.jsx("th",{className:"py-2 px-4 text-start",children:"Trainer Full Name"}),e.jsx("th",{className:"py-2 px-4 text-start",children:"Email"}),e.jsx("th",{className:"py-2 px-4 text-start",children:"Certificates"}),e.jsx("th",{className:"py-2 px-4 text-start",children:"Actions"})]})}),e.jsx("tbody",{children:u.map(s=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"py-2 px-4 text-start",children:`${s.firstName} ${s.lastName}`}),e.jsx("td",{className:"py-2 px-4 text-start",children:s.email}),e.jsx("td",{className:"py-2 px-4 text-start",children:s.certificates.map((i,t)=>e.jsxs("div",{onClick:()=>R(s,t),className:"text-blue-500 hover:underline cursor-pointer",children:["Certificate ",t+1]},t))}),e.jsxs("td",{className:"py-2 px-4 text-start",children:[e.jsx("button",{className:"middle none center mr-4 rounded-lg bg-green-500 py-2 px-4 font-sans text-xs font-bold uppercase text-white shadow-md shadow-green-500/20 transition-all hover:shadow-lg hover:shadow-green-500/40 focus:opacity-[0.85] focus:shadow-none active:opacity-[0.85] active:shadow-none disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none","data-ripple-light":"true",onClick:()=>M(s),children:"Accept"}),e.jsx("button",{className:"middle none center mr-4 rounded-lg bg-red-500 py-2 px-4 font-sans text-xs font-bold uppercase text-white shadow-md shadow-red-500/20 transition-all hover:shadow-lg hover:shadow-red-500/40 focus:opacity-[0.85] focus:shadow-none active:opacity-[0.85] active:shadow-none disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none","data-ripple-light":"true",onClick:()=>k(s),children:"Reject"})]})]},s._id))})]}),e.jsx(O,{isOpen:n!==null,certificates:(n==null?void 0:n.certificates)||[],selectedTrainer:n,selectedCertificateIndex:o,onRequestClose:S}),e.jsx(I,{isOpen:b,title:"Accept Trainer",message:`Are you sure you want to accept ${r==null?void 0:r.firstName} ${r==null?void 0:r.lastName}?`,onConfirm:E,onClose:()=>h(!1)}),e.jsx(V,{isOpen:N,onClose:()=>g(!1),onReject:A,title:"Reject Trainer"}),e.jsx(P,{})]})};export{G as default};
