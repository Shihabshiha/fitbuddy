import{a as i,j as e,k as y,M as C,Q as E,n as h,S as F,T as I,A as N,q as R,V}from"./index-70172670.js";import{T as q}from"./tableSkelton-6bef641a.js";import{B}from"./BeatLoader-64f70da0.js";import{F as $,c as z}from"./index-c3f6fc16.js";import{R as H}from"./react-paginate-19488adc.js";const Q=({course:t,onUpdateCourse:o})=>{const[r,a]=i.useState(!1),[n,l]=i.useState(!1),d=async()=>{l(!1);try{a(!0);const c=await E(t._id,!t.isListed);o(c.data),a(!1)}catch{h("An error occured during list/unlist","error"),a(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>l(!0),className:`${r?"bg-gray-400 cursor-not-allowed":t.isListed?"bg-red-500 hover:bg-red-600":"bg-green-500 hover:bg-green-600"} text-white px-4 py-1 rounded-md focus:outline-none focus:ring focus:ring-blue-300`,disabled:r,children:r?e.jsx(B,{size:8,color:"white"}):t.isListed?"Unlist":"List"}),e.jsx(y,{}),e.jsxs(C,{isOpen:n,onRequestClose:()=>l(!1),className:"modal fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white rounded-lg p-6 w-11/12 max-w-md shadow-lg",overlayClassName:"fixed inset-0 flex items-center justify-center bg-opacity-30 bg-gray-900",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Confirm ",t.isListed?"Unlisting":"Listing","?"]}),e.jsxs("p",{className:"text-gray-700 mb-6",children:["Are you sure you want to ",t.isListed?"unlist":"list"," this course?"]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{onClick:d,className:`${t.isListed?"bg-red-500 hover:bg-red-700":"bg-green-500 hover:bg-green-700"} text-white font-semibold px-2 py-1 rounded mr-2`,children:"Confirm"}),e.jsx("button",{onClick:()=>l(!1),className:"bg-gray-300 hover:bg-gray-400 text-gray-700 font-semibold px-2 py-1 rounded",children:"Cancel"})]})]})]})},Y=({onViewClick:t,onDeleteClick:o})=>{const[r,a]=i.useState(!1),n=()=>{a(!r)};return e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:n,className:"px-4 py-2  hover:bg-gray-100 focus:outline-none focus:bg-gray-100",children:e.jsx($,{icon:z})}),r&&e.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white border rounded-lg shadow-lg",children:e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx("button",{onClick:t,className:"block px-4 py-2 text-gray-800 hover:bg-gray-200 w-full text-left",children:"View"})}),e.jsx("li",{children:e.jsx("button",{onClick:o,className:"block px-4 py-2 text-red-600 hover:bg-gray-200 w-full text-left",children:"Delete"})})]})})]})},G=({isOpen:t,onClose:o,onDelete:r,courseIdToDelete:a})=>{const[n,l]=i.useState(!1),d=async()=>{var c,g;try{a&&(l(!0),await I(a),h("Course deleted successfully.","success"),l(!1),r(a))}catch(p){l(!1),p instanceof N&&((g=(c=p.response)==null?void 0:c.data)!=null&&g.error)?h(p.response.data.error,"error"):h("An error occured in deleting the course.","error")}};return e.jsxs(C,{isOpen:t,onRequestClose:o,contentLabel:"Delete Confirmation Modal",className:"modal fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white rounded-lg p-6 w-11/12 max-w-md shadow-lg",overlayClassName:"modal-overlay fixed top-0 left-0 w-full h-full bg-gray-700 bg-opacity-50 flex items-center justify-center",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 max-w-md mx-auto text-center",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Confirm Deletion"}),e.jsx("p",{className:"mb-4",children:"Are you sure you want to delete this course?"}),e.jsx("div",{className:"flex justify-center",children:n?e.jsx(F,{color:"#4A90E2",loading:!0}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:d,className:"px-4 py-2 rounded bg-red-500 hover:bg-red-600 text-white focus:outline-none mr-2",children:n?"Deleting...":"Yes, Delete"}),e.jsx("button",{onClick:o,className:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400 text-gray-800 focus:outline-none",children:"Cancel"})]})})]}),e.jsx(y,{})]})},ee=()=>{const t=R(),[o,r]=i.useState(!1),[a,n]=i.useState([]),[l,d]=i.useState(!1),[c,g]=i.useState(null),[p,v]=i.useState(0),f=4,k=Math.ceil(a.length/f);i.useEffect(()=>{r(!0);const s=async()=>{var x,j,w;try{const u=await V(),_=(x=u==null?void 0:u.data)==null?void 0:x.result;n(_||[])}catch(u){u instanceof N&&((w=(j=u.response)==null?void 0:j.data)!=null&&w.error)?h(u.response.data.error,"error"):h("An error occured in fetching courses.","error")}finally{r(!1)}};localStorage.getItem("trainerToken")&&s()},[]);const D=s=>{n(m=>m.map(x=>x._id===s._id?s:x))},L=s=>{t(`/trainer/course/${s._id}`,{state:{course:s}})},A=s=>{d(!0),g(s)},S=s=>{d(!1);const m=a.filter(x=>x._id!==s);n(m),g(null)},M=()=>{d(!1),g(null)},O=s=>{const m={year:"numeric",month:"numeric",day:"numeric"};return new Date(s).toLocaleDateString(void 0,m)},b=(p+1)*f,P=b-f,T=a.slice(P,b),U=s=>{v(s.selected)};return e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg md:text-3xl font-bold",children:"My Courses"}),o&&e.jsx(e.Fragment,{children:e.jsx(q,{})}),!o&&e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-end mb-4",children:e.jsx("button",{onClick:()=>{t("/trainer/add-course")},className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md focus:outline-none focus:ring focus:ring-blue-300",children:"Add Course"})}),a.length===0?e.jsxs("div",{className:"bg-white border rounded-lg p-8 text-center",children:[e.jsx("p",{className:"text-gray-500 text-lg",children:"No courses added."}),e.jsx("p",{className:"text-gray-500 text-lg",children:'Click "Add Course" to create a new course.'})]}):e.jsxs("table",{className:"min-w-full border divide-y divide-gray-200 mb-4",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider",children:"Thumbnail"}),e.jsx("th",{className:"px-6 py-3 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider",children:"Course Name"}),e.jsx("th",{className:"px-6 py-3 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider",children:"Created Date"}),e.jsx("th",{className:"px-6 py-3 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider",children:"List / Unlist"}),e.jsx("th",{className:"px-6 py-3 bg-gray-50 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:T.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-no-wrap",children:e.jsx("img",{src:s.thumbnailUrl,alt:s.courseName,className:"h-12 w-12"})}),e.jsx("td",{className:"px-6 py-4 whitespace-no-wrap ",children:s.courseName}),e.jsx("td",{className:"px-6 py-4 whitespace-no-wrap ",children:O(s.createdAt)}),e.jsx("td",{className:"px-6 py-4 whitespace-no-wrap",children:e.jsx(Q,{course:s,onUpdateCourse:D})}),e.jsx("td",{className:"px-6 py-4 whitespace-no-wrap",children:e.jsx(Y,{onViewClick:()=>L(s),onDeleteClick:()=>A(s._id)})})]},s._id))})]}),e.jsx(H,{previousLabel:e.jsx("span",{className:"px-2 py-1 bg-blue-500 text-white rounded-md",children:"Previous"}),nextLabel:e.jsx("span",{className:"px-2 py-1 bg-blue-500 text-white rounded-md",children:"Next"}),pageCount:k,marginPagesDisplayed:2,pageRangeDisplayed:5,onPageChange:U,containerClassName:"pagination flex space-x-2",pageClassName:"page",activeClassName:"active"})]}),e.jsx(G,{isOpen:l,onClose:M,onDelete:S,courseIdToDelete:c}),e.jsx(y,{})]})};export{ee as default};
