import{j as e,u as C,M as P,t as T,a as o,c as S,v as $,b as q,e as H,w as V,U as Y,k as G,x as J,A as f,n as x,y as K,z as Q}from"./index-c7771814.js";import{f as X}from"./userUtils-ed9694c1.js";import{F as Z,b as ee}from"./index-0a9425e0.js";const se=()=>e.jsxs("div",{className:"grid mt-16 px-5 md:px-20 py-10",children:[e.jsxs("div",{className:"grid md:grid-cols-4 grid-flow-row py-5 px-2 gap-3 border-b",children:[e.jsx("div",{className:"md:col-span-3 text-center md:text-start",children:e.jsx("div",{className:"animate-pulse bg-gray-300 w-32 h-6 rounded"})}),e.jsx("div",{className:"md:col-span-1 grid justify-center item-center",children:e.jsx("button",{className:"animate-pulse bg-gray-300 w-24 h-10 rounded-full"})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 md:gap-20",children:[e.jsx("div",{className:"col-span-1 py-5",children:e.jsxs("div",{className:"bg-blue-gray-50 rounded p-5 animate-pulse",children:[e.jsxs("div",{className:"flex border-b border-blue-gray-100 py-4 px-5 gap-3 items-center",children:[e.jsx("div",{className:"w-6 h-6 bg-gray-300 rounded-full animate-pulse"}),e.jsx("div",{className:"flex items-center text-gray-800 justify-center gap-2",children:e.jsx("div",{className:"bg-gray-300 w-20 h-4 rounded animate-pulse"})})]}),e.jsxs("div",{className:"flex border-b border-blue-gray-100 py-4 px-5 gap-3 items-center",children:[e.jsx("div",{className:"w-6 h-6 bg-gray-300 rounded-full animate-pulse"}),e.jsx("div",{className:"flex items-center text-gray-800 justify-center gap-2",children:e.jsx("div",{className:"bg-gray-300 w-16 h-4 rounded animate-pulse"})})]}),e.jsxs("div",{className:"flex border-b border-blue-gray-100 py-4 px-5 gap-3 items-center",children:[e.jsx("div",{className:"w-6 h-6 bg-gray-300 rounded-full animate-pulse"}),e.jsx("div",{className:"flex items-center text-gray-800 justify-center gap-2",children:e.jsx("div",{className:"bg-gray-300 w-12 h-4 rounded animate-pulse"})})]}),e.jsxs("div",{className:"flex py-4 px-5 gap-3 items-center",children:[e.jsx("div",{className:"w-6 h-6 bg-gray-300 rounded-full animate-pulse"}),e.jsx("div",{className:"flex items-center text-gray-800 justify-center gap-2",children:e.jsx("div",{className:"bg-gray-300 w-8 h-4 rounded animate-pulse"})})]})]})}),e.jsx("div",{className:"col-span-1 my-5",children:e.jsx("div",{className:"block w-full h-[15rem] bg-gray-300 animate-pulse rounded"})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 mt-5 md:gap-20 gap-5",children:[e.jsxs("div",{className:"col-span-1",children:[e.jsx("div",{className:"my-3",children:e.jsx("div",{className:"bg-gray-300 w-32 h-4 animate-pulse rounded"})}),e.jsx("div",{className:"animate-pulse bg-gray-300 h-20"})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("div",{className:"my-3",children:e.jsx("div",{className:"bg-gray-300 w-24 h-4 animate-pulse rounded"})}),e.jsx("div",{className:"grid py-3",children:e.jsxs("div",{className:"flex justify-start items-center gap-5",children:[e.jsx("div",{className:"bg-gray-300 w-14 h-14 rounded-full animate-pulse"}),e.jsxs("div",{className:"flex flex-col gp-0",children:[e.jsx("div",{className:"bg-gray-300 w-20 h-4 animate-pulse rounded"}),e.jsx("div",{className:"bg-gray-300 w-16 h-4 animate-pulse rounded"})]})]})})]})]}),e.jsxs("div",{className:"grid",children:[e.jsx("div",{className:"mt-5 py-3 border-t border-b px-2",children:e.jsx("div",{className:"bg-gray-300 w-40 h-4 animate-pulse rounded"})}),e.jsx("ul",{className:"mt-5 flex flex-col gap-2",children:Array.from({length:5}).map((c,t)=>e.jsxs("li",{className:"flex md:flex-row gap-2 shadow justify-between items-center bg-blue-gray-50 hover:bg-blue-gray-100 rounded px-3 py-2 md:py-5 animate-pulse",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full animate-pulse"}),e.jsx("div",{className:"w-2/3 h-4 bg-gray-300 animate-pulse rounded"}),e.jsx("button",{className:"block text-xs md:text-md font-bold shadow uppercase bg-red-500 text-white rounded border border-red-500 hover:bg-white hover:shadow-md hover:text-red-500 py-2 px-3 animate-pulse",children:"Watch Now"})]},t))})]})]}),ae=({isOpen:c,onRequestClose:t,message:n})=>{const s=C(),g=()=>{s("/login")};return e.jsx(P,{isOpen:c,onRequestClose:t,className:"modal fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white rounded-lg p-4 w-11/12 max-w-md shadow-lg",overlayClassName:"modal-overlay fixed top-0 left-0 w-full h-full bg-gray-700 bg-opacity-50 flex items-center justify-center",children:e.jsxs("div",{className:"p-2",children:[e.jsx("p",{className:"text-lg mb-4",children:n}),e.jsxs("div",{className:"pt-2 md:p-4 flex justify-end gap-2 md:gap-5",children:[e.jsx("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mr-2",onClick:g,children:"Go to Login"}),e.jsx("button",{className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded",onClick:t,children:"Cancel"})]})]})})},re=({isOpen:c,onClose:t,message:n})=>e.jsx(P,{isOpen:c,onRequestClose:t,contentLabel:"Enrolled Modal",className:"w-full max-w-md m-auto mt-25 p-6 rounded-lg bg-white shadow-lg",overlayClassName:"fixed inset-0 flex justify-center items-center bg-gray-700 bg-opacity-50",children:e.jsxs("div",{className:"text-center",children:[n==="success"?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"text-green-400 w-16 h-16 mx-auto mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Enrolled Successfully"}),e.jsx("p",{className:"text-gray-600",children:"Congratulations! You have successfully enrolled in the program."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"text-red-400 w-16 h-16 mx-auto mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Payment Canceled"}),e.jsx("p",{className:"text-gray-600",children:"Your payment has been canceled."})]}),e.jsx("button",{onClick:t,className:"mt-6 px-4 py-2 bg-green-400 hover:bg-green-500 text-white rounded-full focus:outline-none focus:ring focus:ring-green-300",children:"Close"})]})}),de=()=>{var k,M;const c=C(),t=T(),n=t==null?void 0:t.programId,[s,g]=o.useState(),[L,b]=o.useState(!0),[E,u]=o.useState(!1),[I,v]=o.useState(""),[A,m]=o.useState(!1),[D,p]=o.useState(!1),[F,y]=o.useState(""),h=S($),j=q(),N=S(H),w=(k=h==null?void 0:h.userDetails)!=null&&k.enrolledPrograms&&n?h.userDetails.enrolledPrograms.includes(n):!1,z=async l=>{var r,d;try{const a=await J(l);g(a.data.program),b(!1)}catch(a){b(!1),a instanceof f&&((d=(r=a.response)==null?void 0:r.data)!=null&&d.error)?x(a.response.data.error,"error"):x("An error occurred fetching programs.","error")}};o.useEffect(()=>{N&&X(j),window.scrollTo(0,0),n!==void 0&&z(n)},[n,j,N]),o.useEffect(()=>{const l=new URLSearchParams(window.location.search),r=l.get("result"),d=l.get("courseId"),a=localStorage.getItem("paymentModalShown");r==="success"?a||(d&&j(V(d)),p(!0),y("success"),localStorage.setItem("paymentModalShown","true")):r==="cancel"&&(a||(p(!0),y("canceled"),localStorage.setItem("paymentModalShown","true")))},[]);const B=async()=>{var l,r,d;try{if(n!==void 0){m(!0);const i=(l=(await K(n)).data)==null?void 0:l.url;i&&(window.location.href=i)}}catch(a){if(m(!1),a instanceof f&&((d=(r=a.response)==null?void 0:r.data)!=null&&d.error)){const i=a.response.data.error;i==="Authentication required"?(u(!0),v("For enrolling in the program, you need to log in first.")):i==="Token has expired"?(u(!0),v("Your session has expired. Please log in again.")):x(i,"error")}else m(!1),console.error("Error occured",a),x("An error occurred during enroll","error")}},U=()=>{u(!1),m(!1)},R=()=>{p(!1)},W=(l,r)=>{c(`/program/video/${r}`,{state:{videoData:l}})},_=async(l,r)=>{var d,a;try{const O=(await Q(l,r)).data.result._id;c(`/inbox/${O}`)}catch(i){i instanceof f&&((a=(d=i.response)==null?void 0:d.data)!=null&&a.error)?x(i.response.data.error,"error"):x("An error occurred making chat.","error")}};return e.jsxs(e.Fragment,{children:[L?e.jsx(se,{}):s?e.jsxs("div",{className:"grid mt-16 px-5 md:px-20 py-10",children:[e.jsxs("div",{className:"grid md:grid-cols-4 grid-flow-row py-5 px-2 gap-3 border-b",children:[e.jsx("div",{className:"md:col-span-3 text-center md:text-start",children:e.jsx("h1",{className:"text-3xl font-bold",children:s==null?void 0:s.courseName})}),e.jsx("div",{className:"md:col-span-1 grid justify-center item-center",children:s.price===0?e.jsx("button",{className:"bg-yellow-400 border hover:bg-white hover:text-black py-1 px-8 rounded font-semibold uppercase text-white shadow-lg",children:"Free"}):e.jsx(e.Fragment,{children:A?e.jsx("button",{className:"bg-light-green-700 border border-light-green-700 hover:bg-white hover:text-light-green-700 py-1 px-8 rounded font-semibold uppercase text-white shadow-lg",children:"Loading.."}):w?e.jsx("p",{className:"font-semibold text-white rounded bg-green-600 px-4 py-2 hover:shadow-md",children:"Enrolled"}):e.jsx("button",{onClick:B,className:"bg-light-green-700 border border-light-green-700 hover:bg-white hover:text-light-green-700 py-1 px-8 rounded font-semibold uppercase text-white shadow-lg",children:"Enroll"})})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 md:gap-20",children:[e.jsx("div",{className:"col-span-1 py-5",children:e.jsxs("div",{className:"bg-blue-gray-50 rounded",children:[e.jsxs("div",{className:"flex border-b border-blue-gray-100 py-4 px-5 gap-3 items-center",children:[e.jsx("div",{className:"w-6",children:e.jsx("svg",{stroke:"green","stroke-width":"1.5",fill:"green",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:e.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"})})}),e.jsxs("div",{className:"flex items-center text-gray-800 justify-center gap-2",children:[e.jsx("p",{className:"text-lg font-sans",children:"Enrolled :"}),e.jsxs("p",{className:"text-sm",children:[s==null?void 0:s.enrollmentCount," fellows"]})]})]}),e.jsxs("div",{className:"flex border-b border-blue-gray-100 py-4 px-5 gap-3 items-center",children:[e.jsx("div",{className:"w-6",children:e.jsx("svg",{stroke:"blue",fill:"blue","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:e.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"flex items-center text-gray-800 justify-center gap-2",children:[e.jsx("p",{className:"text-lg font-sans",children:"Duration :"}),e.jsxs("p",{className:"text-sm",children:[s==null?void 0:s.duration," hours"]})]})]}),e.jsxs("div",{className:"flex border-b border-blue-gray-100 py-4 px-5 gap-3 items-center",children:[e.jsx("div",{className:"w-6",children:e.jsx("svg",{fill:"red",stroke:"red","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:e.jsx("path",{"stroke-linecap":"round",d:"M15.75 10.5l4.72-4.72a.75.75 0 011.28.53v11.38a.75.75 0 01-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 002.25-2.25v-9a2.25 2.25 0 00-2.25-2.25h-9A2.25 2.25 0 002.25 7.5v9a2.25 2.25 0 002.25 2.25z"})})}),e.jsxs("div",{className:"flex items-center text-gray-800 justify-center gap-2",children:[e.jsx("p",{className:"text-lg font-sans",children:"Videos :"}),e.jsx("p",{className:"text-sm",children:s==null?void 0:s.videos.length})]})]}),e.jsxs("div",{className:"flex border-b border-blue-gray-100 py-4 px-5 gap-3 items-center",children:[e.jsx("div",{className:"w-6",children:e.jsx("svg",{fill:"orange",stroke:"orange","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:e.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.429 9.75L2.25 12l4.179 2.25m0-4.5l5.571 3 5.571-3m-11.142 0L2.25 7.5 12 2.25l9.75 5.25-4.179 2.25m0 0L21.75 12l-4.179 2.25m0 0l4.179 2.25L12 21.75 2.25 16.5l4.179-2.25m11.142 0l-5.571 3-5.571-3"})})}),e.jsxs("div",{className:"flex items-center text-gray-800 justify-center gap-2",children:[e.jsx("p",{className:"text-lg font-sans",children:"Level :"}),e.jsx("p",{className:"text-sm",children:s==null?void 0:s.level})]})]}),e.jsxs("div",{className:"flex py-4 px-5 gap-3 items-center",children:[e.jsx("div",{className:"w-7",children:e.jsx("svg",{fill:"black",stroke:"white","stroke-width":"1.5",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:e.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 8.25H9m6 3H9m3 6l-3-3h1.5a3 3 0 100-6M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"flex items-center text-gray-800 justify-center gap-2",children:[e.jsx("p",{className:"text-lg font-sans font-bold",children:"Price :"}),(s==null?void 0:s.price)===0?e.jsx("p",{className:"text-lg font-semibold text-red-600 uppercase",children:"Free"}):e.jsx("p",{className:"text-lg font-semibold",children:s==null?void 0:s.price})]})]})]})}),e.jsx("div",{className:"col-span-1 my-5",children:e.jsx("div",{className:"block w-full h-[20rem]",children:e.jsx("img",{src:s==null?void 0:s.thumbnailUrl,alt:"program",className:"h-full w-full object-cover rounded"})})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 mt-5 md:gap-20 gap-5",children:[e.jsxs("div",{className:"col-span-1 ",children:[e.jsx("div",{className:"my-3",children:e.jsx("h2",{className:"text-xl text-gray-900 font-bold uppercase",children:"About the program"})}),e.jsx("div",{children:e.jsx("p",{className:"font-sans",children:s==null?void 0:s.about})})]}),e.jsx("div",{className:"col-span-1",children:e.jsxs("div",{className:"my-3",children:[e.jsx("h2",{className:"text-xl text-gray-900 font-bold uppercase",children:"trainer info"}),e.jsx("div",{className:"grid py-3",children:e.jsxs("div",{className:"flex justify-start items-center gap-5",children:[e.jsx("div",{className:"block w-14 h-14",children:e.jsx("img",{src:((M=s==null?void 0:s.trainerDetails)==null?void 0:M.profileUrl)||Y,className:"h-full w-full object-cover rounded-full"})}),e.jsxs("div",{className:"flex flex-col gp-0",children:[e.jsx("h5",{className:"text-lg capitalize font-semibold",children:`${s==null?void 0:s.trainerDetails.firstName} ${s==null?void 0:s.trainerDetails.lastName}`}),e.jsx("span",{className:"text-sm capitalize",children:"fitness influencer"})]}),e.jsx("div",{children:e.jsx(Z,{icon:ee,className:"text-light-blue-800 text-2xl ml-2 hover:cursor-pointer",title:"Chat with trainer",onClick:()=>_(s.trainerDetails._id,s._id)})})]})})]})})]}),e.jsxs("div",{className:"grid",children:[e.jsx("div",{className:" mt-5 py-3 border-t border-b px-2",children:e.jsx("h2",{className:"text-2xl text-gray-900 font-bold uppercase",children:"Explore the Videos"})}),e.jsx("ul",{className:"mt-5 flex flex-col gap-2",children:s==null?void 0:s.videos.map((l,r)=>e.jsxs("li",{className:"flex flex-col md:flex-row gap-2 shadow justify-between items-center bg-blue-gray-50 hover:bg-blue-gray-100 rounded px-3 py-2 md:py-5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"cursor-pointer",children:e.jsxs("h1",{className:"text-xl font-bold",children:[r+1,"."]})}),e.jsx("div",{className:"cursor-pointer",children:e.jsx("h4",{className:"text-sm md:text-xl font-medium",children:l.caption})})]}),w||s.price===0?e.jsx("button",{onClick:()=>W(l,r+1),className:"block text-xs md:text-md font-bold shadow uppercase bg-red-500 text-white rounded border border-red-500 hover:bg-white hover:shadow-md hover:text-red-500 py-2 px-3",children:"Watch Now"}):e.jsx("span",{className:"text-xs md:text-base font-medium capitalize bg-red-600 text-white rounded border py-2 px-3",children:"Enroll to watch videos"})]},r))})]})]}):e.jsx("div",{className:"text-center py-10 text-gray-800 mt-52",children:e.jsx("p",{className:"text-2xl font-bold",children:"Program Not Found ,go back to home !!"})}),e.jsx(G,{}),e.jsx(ae,{isOpen:E,onRequestClose:U,message:I}),e.jsx(re,{isOpen:D,onClose:R,message:F})]})};export{de as default};
