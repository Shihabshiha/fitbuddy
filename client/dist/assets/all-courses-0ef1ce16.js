import{a as d,j as e,r as g,k as h,M as N,n as u,A as C}from"./index-ee55ad39.js";import{l as w,d as L}from"./admin-811691ad.js";import{T as v}from"./tableSkelton-24ac5c6d.js";import{B as A}from"./BeatLoader-98551d8c.js";import{R as P}from"./react-paginate-9b7c3de1.js";const k=({course:t,onUpdateCourse:m})=>{const[c,n]=d.useState(!1),[x,i]=d.useState(!1),l=async()=>{i(!1);try{n(!0);const p=await w(t._id,!t.isListed);m(p.data),n(!1)}catch{u("An error occured during list/unlist","error"),n(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(g.Button,{onClick:()=>i(!0),ripple:!1,className:`${c?"bg-gray-400 cursor-not-allowed":t.isListed?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"} text-white px-4 py-2 rounded-md focus:outline-none focus:ring focus:ring-blue-300`,disabled:c,children:c?e.jsx(A,{size:8,color:"white"}):t.isListed?"Decline":"Accept"}),e.jsx(h,{}),e.jsxs(N,{isOpen:x,onRequestClose:()=>i(!1),className:"modal fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white rounded-lg p-6 w-11/12 max-w-md shadow-lg",overlayClassName:"fixed inset-0 flex items-center justify-center bg-opacity-30 bg-gray-900",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Confirm ",t.isListed?"Unlisting":"Listing","?"]}),e.jsxs("p",{className:"text-gray-700 mb-6",children:["Are you sure you want to ",t.isListed?"unlist":"list"," this course?"]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx(g.Button,{onClick:l,className:`${t.isListed?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"} text-white font-semibold px-4 py-2 rounded mr-2`,children:"Confirm"}),e.jsx(g.Button,{onClick:()=>i(!1),className:"bg-gray-400 hover:bg-gray-500 text-gray-700 font-semibold px-4 py-2 rounded",children:"Cancel"})]})]})]})},U=()=>{const[t,m]=d.useState([]),[c,n]=d.useState(!0),[x,i]=d.useState(0),l=4,p=Math.ceil(t.length/l);d.useEffect(()=>{(async()=>{var o,a;try{const r=await L(),b=r==null?void 0:r.data.result;m(b||[]),n(!1)}catch(r){n(!1),r instanceof C&&((a=(o=r.response)==null?void 0:o.data)!=null&&a.error)?u(r.response.data.error,"error"):u("An error occured in fetching users data.","error")}})()},[]);const f=s=>{m(o=>o.map(a=>a._id===s._id?s:a))},y=({selected:s})=>{i(s)},j=t.slice(x*l,(x+1)*l);return e.jsxs("div",{className:"p-4",children:[e.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"All Courses List"}),c?e.jsx(v,{}):e.jsxs(e.Fragment,{children:[e.jsxs("table",{className:"min-w-full bg-white shadow-md rounded-lg overflow-hidden mb-4",children:[e.jsx("thead",{className:"bg-gray-100 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sl No"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Course Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Approve / Decline"})]})}),e.jsx("tbody",{children:j.map((s,o)=>{const a=x*l+o+1;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4",children:a}),e.jsx("td",{className:"px-6 py-4",children:s.courseName}),e.jsx("td",{className:"px-6 py-4",children:s.category}),e.jsx("td",{className:"px-6 py-4",children:s.price}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(k,{course:s,onUpdateCourse:f})})]},s._id)})})]}),e.jsx(P,{pageCount:p,pageRangeDisplayed:5,marginPagesDisplayed:2,previousLabel:e.jsx("span",{className:"px-2 py-1 bg-blue-500 text-white rounded-md",children:"Previous"}),nextLabel:e.jsx("span",{className:"px-2 py-1 bg-blue-500 text-white rounded-md",children:"Next"}),onPageChange:y,containerClassName:"pagination flex space-x-2",activeClassName:"active"})]}),e.jsx(h,{})]})};export{U as default};
