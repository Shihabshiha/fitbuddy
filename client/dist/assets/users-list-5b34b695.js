import{a as c,j as e,r as j,k as f,M as N,n as g,A as k}from"./index-70172670.js";import{b as w,c as C}from"./admin-39942b64.js";import{T as U}from"./tableSkelton-6bef641a.js";import{B}from"./BeatLoader-64f70da0.js";import{R as v}from"./react-paginate-19488adc.js";const L=({user:s,onBlockUnblockUser:m})=>{const[d,n]=c.useState(!1),[x,l]=c.useState(!1),o=async()=>{l(!1);try{n(!0);const p=await w(s._id,!s.isBlocked);m(p.data.updatedUser),n(!1)}catch{g("An error occured during list/unlist","error"),n(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(j.Button,{onClick:()=>l(!0),color:d?"gray":s.isBlocked?"green":"red",ripple:!1,className:"text-white px-4 py-2 rounded-md focus:outline-none focus:ring focus:ring-blue-300",disabled:d,children:d?e.jsx(B,{size:8,color:"white"}):s.isBlocked?"Unblock":"Block"}),e.jsx(f,{}),e.jsxs(N,{isOpen:x,onRequestClose:()=>l(!1),className:"modal fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white rounded-lg p-6 w-11/12 max-w-md shadow-lg",overlayClassName:"fixed inset-0 flex items-center justify-center bg-opacity-30 bg-gray-900",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Confirm ",s.isBlocked?"Unblock":"block","?"]}),e.jsxs("p",{className:"text-gray-700 mb-6",children:["Are you sure you want to ",s.isBlocked?"unblock":"block"," , ",s.firstName,"?"]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{onClick:o,className:`${s.isBlocked?"bg-red-500 hover:bg-red-700":"bg-green-500 hover:bg-green-700"} text-white font-semibold px-2 py-1 rounded mr-2`,children:"Confirm"}),e.jsx("button",{onClick:()=>l(!1),className:"bg-gray-300 hover:bg-gray-400 text-gray-700 font-semibold px-2 py-1 rounded",children:"Cancel"})]})]})]})},R=()=>{const[s,m]=c.useState([]),[d,n]=c.useState(!0),[x,l]=c.useState(0),o=4,p=Math.ceil(s.length/o);c.useEffect(()=>{(async()=>{var i,a,h;try{const r=await C();m((i=r==null?void 0:r.data)==null?void 0:i.users),n(!1)}catch(r){n(!1),r instanceof k&&((h=(a=r.response)==null?void 0:a.data)!=null&&h.error)?g(r.response.data.error,"error"):g("An error occured in fetching users data.","error")}})()},[]);const u=t=>{m(i=>i.map(a=>a._id===t._id?t:a))},b=({selected:t})=>{l(t)},y=s.slice(x*o,(x+1)*o);return e.jsxs("div",{className:"p-4",children:[e.jsx("h1",{className:"text-2xl font-semibold mb-4",children:"User List"}),d?e.jsx(U,{}):e.jsxs(e.Fragment,{children:[e.jsxs("table",{className:"min-w-full bg-white shadow-md rounded-lg overflow-hidden mb-4",children:[e.jsx("thead",{className:"bg-gray-100 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sl No"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Full Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),e.jsx("tbody",{children:y.map((t,i)=>{const a=x*o+i+1;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4",children:a}),e.jsx("td",{className:"px-6 py-4",children:`${t.firstName} ${t.lastName}`}),e.jsx("td",{className:"px-6 py-4",children:t.email}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(L,{user:t,onBlockUnblockUser:u})})]},t._id)})})]}),e.jsx(v,{pageCount:p,pageRangeDisplayed:5,marginPagesDisplayed:2,previousLabel:e.jsx("span",{className:"px-2 py-1 bg-blue-500 text-white rounded-md",children:"Previous"}),nextLabel:e.jsx("span",{className:"px-2 py-1 bg-blue-500 text-white rounded-md",children:"Next"}),onPageChange:b,containerClassName:"pagination flex space-x-2",activeClassName:"active"})]}),e.jsx(f,{})]})};export{R as default};
