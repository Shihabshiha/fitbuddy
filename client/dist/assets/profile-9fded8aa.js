import{b as N,v as I,d as w,u as L,a as i,j as e,S as A,U as F,L as S,k as _,H as R,I as k,n as c,A as C}from"./index-70172670.js";import{f as v}from"./userUtils-91936474.js";import{P as U}from"./programCard-477b8856.js";const V=()=>{var g,h,u,p;const a=N(I),d=N(w),m=L(),[f,b]=i.useState([]),x=i.useRef(null),[P,o]=i.useState(!1),y=async()=>{var s,t,l;if((s=a.userDetails)!=null&&s._id){const r=await R((t=a.userDetails)==null?void 0:t._id);b((l=r.data)==null?void 0:l.enrolledPrograms)}};i.useEffect(()=>{d&&v(m)},[]),i.useEffect(()=>{d&&y()},[a]);const E=()=>{var s;(s=x.current)==null||s.click()},D=async s=>{var t,l;o(!0);try{const r=s.target.files?s.target.files[0]:null;if(r){const j=new FormData;j.append("profileImage",r);const n=await k(j);o(!1),(n==null?void 0:n.status)===200&&(v(m),c("Profile Image changed successfully","success"))}}catch(r){o(!1),r instanceof C&&((l=(t=r.response)==null?void 0:t.data)!=null&&l.error)?c(r.response.data.error,"error"):c("An error occurred during profile image change.","error")}};return e.jsxs(e.Fragment,{children:[P&&e.jsx("div",{className:"fixed inset-0 flex justify-center items-center bg-opacity-50 bg-white",children:e.jsx(A,{color:"#007BFF",loading:!0})}),e.jsxs("div",{className:"px-10 mt-20",children:[e.jsx("div",{className:"py-5 border-b",children:e.jsx("h1",{className:"text-2xl md:text-4xl ",children:"Profile Dashboard"})}),e.jsxs("div",{className:"flex flex-col-2 mt-3",children:[e.jsx("div",{className:"pl-1",children:e.jsx("img",{src:((g=a.userDetails)==null?void 0:g.profileImage)||F,alt:"Photo",className:"w-[10rem] h-[10rem] object-cover rounded-full"})}),e.jsxs("div",{className:"pl-4 flex flex-col justify-center",children:[e.jsxs("span",{className:"text-xl font-semibold",children:[(h=a.userDetails)==null?void 0:h.firstName," ",(u=a.userDetails)==null?void 0:u.lastName]}),e.jsx("span",{className:"text-base font-medium",children:(p=a.userDetails)==null?void 0:p.email})]})]}),e.jsxs("div",{className:"flex mt-4 pl-8",children:[e.jsx("button",{className:"rounded-lg bg-light-green-600 px-2 py-1 font-semibold mt-2 hover:bg-light-green-800 hover:text-white",onClick:E,children:"Edit photo"}),e.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},ref:x,onChange:D})]}),e.jsx("div",{className:"mt-10 ml-3 border-t-2",children:e.jsx("h2",{className:"text-3xl mt-3",children:"Enrolled Programs"})}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 mt-2 items-center mb-10",children:f&&f.map(s=>e.jsx("div",{className:"md:p-3 w-full md:w-full  overflow-hidden text-center  rounded-lg transform-gpu transition-transform hover:scale-105",children:e.jsx(S,{to:`/program/${s._id}`,children:e.jsx(U,{programInfo:s})},s._id)},s._id))}),e.jsx(_,{})]})]})};export{V as default};
